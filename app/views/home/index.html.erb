<% content_for :javascript do %>
  <script type="text/javascript">
    ShopifyApp.ready(function(){
      ShopifyApp.Bar.initialize({ title: "Home" });
    });
  </script>
<% end %>
<body>
  <h2>Orders</h2>

    <%= form_tag("/search", method: "get") do %>
      <%= label_tag(:q, "Search for:") %>
      <%= text_field_tag(:q) %>
      <%= submit_tag("Search") %>
    <% end %>

    <div class="header-bar__module header-bar__search">
      <form action="/search" method="get" class="header-bar__search-form clearfix" role="search">
        <button type="submit" class="btn icon-fallback-text header-bar__search-submit">
          <span class="icon icon-search" aria-hidden="true">::before</span>
          <span class="fallback-text">Search</span>
        </button>
        <input type="search" name="q" value aria-label="Search" class="header-bar__search-input" placeholder="Search" autocomplete="on">::after
      </form>
    </div>
    
    <div class="search-container"></div>
    <table class="table table-bordered table-striped" id="order_table">
      <thead>
        <tr>
          <th>Order Number</th>
          <th>Name</th>
          <th>Email</th>
          <th><button type="button" onclick="generateCode()">Generate Code</button></th>
          <th>Upcycle Code</th>
          <th><button>Notify Customer</button></th>
        </tr>
      </thead>

      <tbody>
        <% @orders.each do |order| %>
          <tr>
            <td><%= order.number %></td>
            <td><%= order.customer.first_name %> <%= order.customer.last_name %></td>
            <td><%= order.customer.email %></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <hr>
</body>
